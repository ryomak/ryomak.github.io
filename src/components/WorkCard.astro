---
import path from "path";
import ImageWrapper from "./misc/ImageWrapper.astro";
import { Icon } from 'astro-icon/components';
import {getDir} from "../utils/url-utils";

interface Props {
    class: string;
    entry: any;
    title: string;
    url: string;
    published: Date;
    tags: string[];
    category: string;
    image: string;
    description: string;
    words: number;
    draft: boolean;
    style: string;
}
const { entry, title, url, published, tags, category, image, description, words, style } = Astro.props;
const className = Astro.props.class;

const imageUrl = image || "https://github.com/ryomak/ryomak.github.io/assets/21288308/0e893d2c-7e5b-4277-b1ea-0c0f2628fe82";

---
<div class="w-full mb-4">
    <div class="space-y-6">
        <div class:list={["card-base flex flex-col w-full rounded-[var(--radius-large)] overflow-hidden relative", className]} style={style}>
            <a href={url} aria-label={title} class:list={["group", "relative rounded-xl overflow-hidden active:scale-95"]}>
                <div class="absolute pointer-events-none z-10 w-full h-full group-hover:bg-black/30 group-active:bg-black/50 transition"></div>
                <div class="absolute pointer-events-none z-20 w-full h-full flex items-center justify-center">
                    <Icon name="material-symbols:chevron-right-rounded" class="transition opacity-0 group-hover:opacity-100 text-white text-5xl"></Icon>
                </div>
                <ImageWrapper src={imageUrl} basePath={path.join("content/posts/", getDir(entry.id))} alt="Cover Image of the Post" class="w-full object-cover object-center" ></ImageWrapper>
            </a>
            <div class:list={["px-4 py-3"]}>
                <a href={url} class="transition w-full block font-bold text-lg text-90 hover:text-[var(--primary)] dark:hover:text-[var(--primary)] active:text-[var(--title-active)] dark:active:text-[var(--title-active)]">
                    {title}
                    <Icon class="inline text-[var(--primary)] -translate-y-[0.15rem]" name="material-symbols:chevron-right-rounded" size={24}></Icon>
                </a>
            </div>
        </div>
    </div>
</div>
